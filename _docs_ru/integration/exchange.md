---
layout: doc
title:  "Exchange"
section: integration
order: 10
---

Внимание! Перед подключением модуля Exchange необходимо произвести [общую интеграцию]({{ site.baseurl }}{% link _docs_ru/integration/general.md %}) и интеграцию [Post-Checkout]({{ site.baseurl }}{% link _docs_ru/integration/postcheckout.md %}).

Модуль Exchange подключается всего в одно действие.

На всех страницах, где вы хотите показывать баннеры для входа в Flocktory Exchange, необходимо разместить следующий HTML-код:

```html
<div class="i-flocktory" data-fl-action="exchange" data-fl-spot="some_spot" data-fl-user-name="Ivan Ivanov" data-fl-user-email="ivan@gmail.com"></div>
```

Если вы верно выполнили все шаги, описанные в инструкциях ранее, вы сможете подключить модуль, не привлекая программистов. Можно использовать [Google Tag Manager](http://www.google.com/tagmanager/) или просто попросить вашего frontend-разработчика добавить один элемент на страницу.

Обратите внимание, что баннер для входа в Exchange появится на вашем сайте именно в том месте, куда вы вставите данный блок.

## Параметры
В атрибутах указанного HTML-кода передаются следующие параметры баннера.

### data-fl-user-name
Обязaтельный. Полное имя пользователя. Например: `Ivan Ivanov`.

### data-fl-user-email
Обязaтельный. Email пользователя.

### data-fl-spot
Спот в данном случае — это идентификатор баннера, который требуется отобразить на данной странице. Если вы хотите использовать на всех страницах один и тот же баннер, можете просто не передавать нам этот параметр. Спот можно всегда изменить в настройках личного кабинета.

## Создание баннера Exchange
Документацию по созданию банеров можно найти [здесь]({{ site.baseurl }}{% link _docs_ru/exchange/banner.md %})


## На что обратить внимание:
* Обязательна [общая интеграция Flocktory]({{ site.baseurl }}{% link _docs_ru/integration/general.md %})
* Если емейл не известен, нужно передавть телефон в виде 79998887766@unknown.email
* Если нет ни емейла, ни телефона, в соответствующем поле передается xname@flocktory.com
* Если имя не известно, не передавайте в коде параметр data-fl-user-name, либо оставляйте параметр пустым: data-fl-user-name="".



# Интеграция через GTM

В разделе Tags создайте тег и поместите туда следующий код

```html
<div class="i-flocktory" data-fl-action="exchange" data-fl-spot="some_spot" data-fl-user-name="Ivan Ivanov" data-fl-user-email="ivan@gmail.com"></div>
```

Вместо значений атрибутов подставьте переменные,  созданные при интеграции Postcheckout ( user_name и user_email ).

![](https://assets.flocktory.com/uploads/clients/1791/bad05265-b502-4c42-beae-45271f6f9dfd_image18.png)

Привяжите к тегу триггер, который будет срабатывать при попадании пользователя на страницу,  где должен быть показан баннер.

Если вы хотите показывать разные баннеры на разных страницах, нужно либо создать несколько тегов с разными триггерами и значениями параметра spot,  
Либо учесть все случаи в триггере и подставлять соответствующее значение spot через переменную.
