---
layout: doc
title:  "Postcheckout"
section: integration
---

Данный код требуется разместить на странице успешного оформления заказа.

Если у вас несколько различных страниц успешно оформленного заказа — необходимо разместить код на каждой такой странице. Код интеграции должны сформировать на сервере ваши программисты (например, при помощи Java/Ruby/PHP/Perl).

```html
<script type="text/javascript">
    window.flocktory = window.flocktory || [];
    window.flocktory.push(['postcheckout', {
        user: {
            name: 'Ivan Ivanov',
            email: 'ivan@gmail.com',
            sex: 'm',
        },
        order: {
            id: '77',
            price: 2000,
            custom_field: 'my_custom_id',
            items: [{
                id: '777',
                title: 'Nike Shoes',
                price: 1000,
                image: 'http://path.to.image',
                count: 1
            }]
        }
    }]);
</script>
```

## Параметры кода интеграции
Код интеграции включает как обязательные, так и опциональные параметры. С технической точки зрения, нам достаточно лишь первых, но чем точнее и полнее переданные нам данные, тем лучше сможет работать наш рекомендательный сервис. Пожалуйста, старайтесь указывать как можно больше параметров.

### Обязательные параметры

#### user → name
Полное имя пользователя. Например: Ivan Ivanov. Пожалуйста, передавайте нам имя пользователя как можно точнее. Персонализация элементов сильно влияет на конверсии.

#### user → email
Email пользователя. Благодаря этому параметру мы понимаем, кто есть кто. Если вы по каким-то причинам не знаете email пользователя, но знаете его телефон, достаточно передать его в формате phone_number@unknown.email. Скорее всего, этот пользователь уже есть в нашей базе, и мы сможем обогатить ваши данные.
Если вы ничего не знаете о пользователе, передайте этот параметр в формате id@unknown.email, где id — идентификатор пользователя в вашей системе.

#### order → id
Идентификатор заказа покупателя. Каждый идентификатор заказа должен быть уникальным.

#### order → price
Полная стоимость корзины. Например: 2999,99 или 1000.00. Полная стоимость передается без указания валюты и без пробелов. В качестве разделителя дробных можно использовать как точку, так и запятую.

#### order → items
Корзина товаров на момент покупки. На основе этих данных работают различные фильтры для кампаний, сегментации и рекомендации. Пожалуйста, аккуратно передавайте нам все параметры.
Набор товаров передается как Array в JavaScript.


### Опциональные (необязательные) параметры

#### user → sex
Пол пользователя.
Возможные значения: m и f (для male и female соответственно). Если вы не знаете пол вашего пользователя, не передавайте его нам, мы сами умеем его определять..

#### order → custom_field
Дополнительный идентификатор заказа.
Передается на ваше усмотрение. Если вы не понимаете зачем это, просто не передавайте нам этот параметр..

#### order → items → id
Артикул товара, уникальный для вашего магазина.
На основе артикула мы пытаемся определить уникальные товары, а также найти для них описание и категорию..

#### order → items → price
Стоимость товара.
Передавая нам честную цену товара, вы сможете использовать это в сегментации кампаний. Это необязательный параметр, но он важен для работы нашего Data Department..

#### order → items → title
Название товара.
Product Name.

#### order → items → image
Изображение товара.
URL картинки товара. Его можно использовать для постинга изображения в соцсети..

#### order → items → count
Количество данных товаров в корзине покупателя.
Этот параметр лучше указать, если у вас покупают одного наименования больше, чем один раз. Во-первых, мы лучше поймем предпочтения пользователей, а во-вторых — сможем настроить кампании специально для данной аудитории..

#### spot
Внутренний фильтр кампаний.
Спот — это специальный идентификатор, с помощью которого вы можете сегментировать кампании на основе вашей внутренний логики. К примеру, у вас есть несколько различных страниц «Спасибо за покупку», и вы хотите показывать для них различные кампании. Задавая в коде интеграции определенный спот, вы настраиваете показ определенных кампаний для данного конкретного кода интеграции.

## Как проверить, что все сделано корректно?
Чтобы убедиться, что интеграция настроена верно и работает, оформите заказ, указав электронную почту hello@flocktory.com.

Если все оформлено правильно, вы увидите попап (всплывающее окно), где будет написано, что все работает.

Если же у вас возникнут ошибки, или вы не передадите нам нужные данные, в сообщении об ошибках будет указано, что именно вы забыли сделать.
