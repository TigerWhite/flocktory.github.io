---
layout: doc
title:  "Exchange Loyalty"
section: integration
order: 11
---


Модуль Exchange Loyalty можно подключить двумя способами.
=====================

#### Для того, чтобы подключиться к системе Flocktory, необходимо пройти два простых шага:
* Шаг 1 – провести базовую интеграцию
* Шаг 2 – подключить модуль

### Параметры:

Независимо от того какое количество модулей, и в какой последовательности будут подключаться, важно правильно заполнять параметры:
 * SSID – идентификатор сайта или site id, передается при интеграции и никогда не меняется;
 * BID - идентификатор баннера (banner id – всегда цифрами, spot – название задается в ЛК), передается для того, чтобы фиксировать конверсию с каждого визуального элемента;
 * EMAIL – адрес электронной почты пользователя;
 * NAME – имя пользователя.

Шаг 1: Базовая интеграция.
--------------------

Подключать и управлять любым набором модулей Flocktory можно, установив один единственный код.
* Поместите код загрузчика на все страницы вашего сайта.
* Лучше всего вставить его в тег <head> или в конце тега <body>.

   КОД:
```html
    <script type="text/javascript" src="//api.flocktory.com/v2/loader.js?site_id=SSID" async="async"></script>
```
### Способ 1: Визуальный элемент (баннер)

Переход на страницу с предложениями интернет-магазинов осуществляется через клик на динамический визуальный элемент (баннер):
1. В Личном Кабинете необходимо создать персонализированный баннер (Можно воспользоваться библиотекой готовых баннеров Flocktory. Можно создать самостоятельно, см. отдельную инструкцию.), создать и/или разместить ваш баннер поможет аккаунт-менеджер;
2. Добавьте код на ТОЧНОЕ МЕСТОНАХОЖДЕНИЕ, где баннер должен появиться на странице:

```html
<div class="i-flocktory" data-fl-action="exchange" data-fl-spot="BID(spot name)" data-fl-user-name="NAME" data-fl-user-email="EMAIL"></div>
```

* Для  data-fl-spot назначьте правильное наименование «spot».
* Если известно ИМЯ и/или ИМЕЙЛ адрес пользователя, необходимо подставить значения в тэг в поля data-fl-user-name и data-fl-user-email, соответственно.
* В случае, если ИМЯ и/или ИМЕЙЛ не известны, например, пользователь не авторизован, необходимо:
   1. убрать data-fl-user-name из скрипта
   2. подставить xname@flocktory.com в data-fl-user-email .

Примеры:

> ИМЯ и/или ИМЕЙЛ известны:
```html
<div class="i-flocktory" data-fl-action="exchange" data-fl-spot="afterpayment_thankyoupage" data-fl-user-name="Иван Иванов" data-fl-user-email="ivan@gmail.com"></div>
```
> ИМЯ и/или ИМЕЙЛ не известны:
```html
<div class="i-flocktory" data-fl-action="exchange" data-fl-spot="afterpayment_thankyoupage” data-fl-user-email="xname@flocktory.com"></div>
```
В зависимости от количества механик, в которых будет использоваться модуль Exchange Loyalty, повторите действия 1 и 2 для КАЖДОЙ страницы, 
где визуальный элемент Exchange Loyalty должен показываться.


#### Инструкция создания html-баннера.

1. Установить базовый код загрузчика на всех страницах сайта трафик-провайдера.
2. Создать в личном кабинете баннер, чтобы зарезервировать BID и spot.
3. Создайте баннер, который будет удовлетворять всем требованиям для корректного отображения (размер, стиль, шрифт и т.д.).
4. Создайте источник html в комлекте с CSS, а также любые изображения/иконки, которые будут использованы в самом баннере:
   * Важно: предоставьте стиль шрифта для текста, который будет динамически выгружаться в баннер через Flocktory. Это должен быть приветственный текст, вроде: «Иван, для Вас подарок от одного из наших партнеров».
   * Важно: убедитесь, что баннер содержит кнопку «Перейти» или «Получить», которая будет автоматически обновляться Flocktory.
   * Важно: убедитесь, что html/css создан для работы таким образом, как если бы он работал на Вашем домене!
```html
```
1.   Как только Вы закончите, убедитесь, что верстка выполнена верно, искусственно вызвав баннер на странице «спасибо за покупку».
2.   Используйте именно тот стиль, который был согласован с Flocktory.
3.   Все баннеры должны быть видны и заметны при открытии страницы но ВСЕГДА в дизайне сайта
4.   Отправьте весь комплект (html, css и все изображения) Вашему аккаунт-менеджеру Flocktory для загрузки.

Переход на страницу с предложениями интернет-магазинов осуществляется через клик на статичный визуальный элемент (баннер):
* В Личном Кабинете необходимо создать баннер, чтобы зарезервировать BID (spot), создать баннер поможет аккаунт-менеджер;
* Визуальный элемент (баннер), размещается силами трафик-провайдера не через личный кабинет Flocktory;
* В тег <a href=”URL”> баннера необходимо подставить персонализированную ссылку.

>> Базовая ссылка : <https://share.flocktory.com/exchange/login?ssid=SSID&bid=BID&name=NAME&email=EMAIL>

* Если известно ИМЯ и/или ИМЕЙЛ адрес пользователя, необходимо подставить значения в параметры name и email, соответственно.
* В случае, если ИМЯ и/или ИМЕЙЛ не известны, например, пользователь не авторизован, необходимо:
*     убрать &name=NAME из скрипта
*     подставить xname@flocktory.com вместо EMAIL

**Примеры:**
* ИМЯ и/или ИМЕЙЛ известны:
*    <https://share.flocktory.com/exchange/login?ssid=SSID&bid=BID&name=Иван&email=ivan@gmail.com>
* ИМЯ и/или ИМЕЙЛ не известны:
*    <https://share.flocktory.com/exchange/login?ssid=SSID&bid=BID&email=xname@flocktory.com>

### Способ 2:  iframe

Для того, чтобы открывать страницу с предложениями интернет-магазинов Еxchange as a Loyalty в Iframe, вам нужно на отдельную, пустую страницу YYY вашего ресурса добавить специальный код. 

**ПРИМЕР:**
```html
<style type="text/css">
body
{scrolling:no; }
iframe
{position:absolute; z-index:1; top:0px; left:0px; }
</style>
<iframe src="https://share.flocktory.com/exchange/login?ssid=SSID&bid=BID&email=EMAIL&name=NAME" height="100%" width="100%" frameborder="0"></iframe> 
```

* Если известно ИМЯ и/или ИМЕЙЛ адрес пользователя, необходимо подставить значения в параметры name и email, соответственно.
* В случае, если ИМЯ и/или ИМЕЙЛ не известны, например, пользователь не авторизован, необходимо:
*      убрать &name=NAME из ссылки в коде
*      подставить xname@flocktory.com вместо EMAIL
