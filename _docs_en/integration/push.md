---
layout: doc
title:  "Push"
section: integration
---

Целью этой статьи является описание шагов по интеграции модуля Flocktory PushReward на вашем сайте и сделать возможным взаимодействие между сайтом и пользователем посредством push-уведомлений в мобильной и веб-версиях вашего сайта.

**Для успешной интеграции необходимо иметь доступ и права делать следующие вещи:**
* На вашем должен быть интегрирован модуль Precheckout, необходимый для корректной работы push-уведомлений. Если модуль Precheckout не интегрирован или вы не уверены в этом, просьба обратиться к вашему аккаунт-менеджеру во Flocktory для получения необходимой инструкции.
* Добавлять/редактировать DNS записи вашего домена для того, чтобы создавать CNAME запись
* Загрузить предоставленные файлы в корень вашего домена

## Шаг 1: Создание CNAME записи в ваших домен DNS настройках
Для того, чтобы push-уведомления работали на разных браузерах, вам необходимо добавить CNAME DNS запись для вашего домена в связке с серверами Flocktory. Это также необходимо по причине того, что большинство браузеров (например Chrome) будут отображать пользователю субдомен/домен, который отправляет уведомление.

Мы настоятельно рекомендуем называть запись «push». В этом случае ваши уведомления будут приходить от push.yourdomain.ru

Для того, чтобы создать запись необходимо:

1. Залогиниться в ваш DNS менеджер;
2. Создать новую CNAME запись;
3. Заполнить значения следующим образом:
  * Host: push
  * Points to: push.flocktory.com
  * TTL: 1 день
4. Сохранить настройки и задеплоить изменения;

### Как проверить?
Чтобы подтвердить корректность настройки CNAME, нужно указать получившийся адрес push.yourdomain.ru на сервисе [whatsmydns](https://www.whatsmydns.net/#CNAME) и убедиться в том, что все сервера отвечают push.flocktory.com

## Шаг 2: Загрузите manifest.json и flock_push_worker.js в корень вашего домена

Два файла (manifest.json и flock_push_worker.js) необходимы для того, чтобы разрешить отправлять push-уведомления для основных браузеров, таких как: Chrome, Yandex, Opera и так далее. Файл manifest.json предоставляет мета информацию для браузера, в то время как файл flock_push_worker.js наделяет такой возможностью вашу Precheckout интеграцию.

Для того чтобы завершить этот шаг необходимо:

1. Заполучить два файла (manifest.json и flock_push_worker.js) от вашего аккаунт-менеджера Flocktory;
2. Не меняя файлы и не переименовывая их, загрузите их в корень вашего домена. Эти файлы должны быть доступны в корне (www.yourdomain.ru/[file]);
  * Пожалуйста удостоверьтесь, что файлы существуют как в корне вашего основного домена, так и на мобильной версии (в случае если у вас другая версия для мобильного сайта, например m.yourdomain.ru);
  * Важно! При добавлении файлов убедитесь, что для них выставлены корректные Content Type application/javascript для flock_push_worker.js
3. Для того чтобы подтвердить все, что описано выше, просто откройте любой браузер и перейдите на http://yourdomain.ru/manifest.json и http://yourdomain.ru/flock_push_worker.js. В обоих случаях вы должны увидеть текст из файла;

### Как проверить?
Чтобы подтвердить корректность размещения предоставленных файлов, нужно просто открыть любой браузер и зайти по cсылкам http://yourdomain.ru/manifest.json и http://yourdomain.ru/flock_push_worker.js. В обоих случаях вы должны увидеть текст из файла.

Поздравляем вас, вы интегрировали модуль Flocktory PushReward! Теперь вы можете продолжить настраивать сценарии с вашим аккаунт-менеджером и запускать модуль.
